<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <script type="text/javascript" src="epos-2.9.0.js"></script>
  </head>
  <body>
    <button type="button" name="button" onclick="test()">test</button>
    <script>
        function test () {
          let builder = new epson.ePOSBuilder()
          console.log(builder);
          // get current date
          let now = new Date();
          builder.addPageBegin()
          // builder.addPageArea(0, 0, 384, 100);
          builder.addTextLang('en')
          builder.addTextSmooth(true);
          builder.addTextFont(builder.FONT_A);
          builder.addTextSize(1, 1);
          builder.addTextStyle(false, false, true)
          builder.addTextAlign(builder.ALIGN_CENTER)
          builder.addText('Tk & Sdk Sang Timur Tomang\n');
          builder.addText('Telp. 021-72839483\n');
          builder.addTextSize(1, 1);
          builder.addTextFont(builder.FONT_SPECIAL_B);
          builder.addText('Jl. Taman Kedoya Permai, Kebayoran Baru, Jakarta Selatan, 12345');
          // format - line
          builder.addTextStyle(0, 1, 0);
          builder.addPagePosition(0, 110);

          builder.addTextFont(builder.FONT_SPECIAL_B);
          builder.addText('\n12345 - ' + now.toDateString() + ' ' + now.toTimeString().slice(0, 8) + ' Kasir: Kevin Himawan\n');
          builder.addTextStyle(0, 1, 0);
          builder.addPagePosition(1, 170);
          builder.addText('\n');
          builder.addTextStyle(0, 0, 0);

          builder.addTextPosition(0, 190)
          builder.addText('Nama Produk')
          builder.addTextStyle(0, 0, 0);

          builder.addTextPosition(200, 190)
          builder.addText('Size')
          builder.addTextStyle(0, 0, 0);

          builder.addTextPosition(300, 190)
          builder.addText('Jumlah')
          builder.addTextStyle(0, 0, 0);

          builder.addTextPosition(400, 190)
          builder.addText('Harga')
          builder.addTextStyle(0, 0, 0);

          builder.addTextPosition(500, 190)
          builder.addText('Total')
          builder.addTextStyle(0, 0, 0);

          // page break
          builder.addText('\n');
          for (var i = 0; i < 4; i++) {
            builder.addTextPosition(0, 0)
            builder.addText('Bulpen Faster 2.0')
            builder.addTextStyle(0, 0, 0);

            builder.addTextPosition(200, 0)
            builder.addText('-')
            builder.addTextStyle(0, 0, 0);

            builder.addTextPosition(300, 0)
            builder.addText('50')
            builder.addTextStyle(0, 0, 0);

            builder.addTextPosition(400, 0)
            builder.addText('2500')
            builder.addTextStyle(0, 0, 0);

            builder.addTextPosition(500, 0)
            builder.addText('12500')
            builder.addTextStyle(0, 0, 0);
            builder.addText('\n');
          }

          builder.addText('\n');

          builder.addTextAlign(builder.ALIGN_RIGHT)
          builder.addText('Subtotal')
          builder.addTextPosition(250, 0)
          builder.addText('250000')
          builder.addTextStyle(0, 1, 0);

          // break
          builder.addText('\n');

          builder.addTextAlign(builder.ALIGN_RIGHT)
          builder.addText('Pajak ( 10% )')
          builder.addTextPosition(250, 0)
          builder.addText('25000')
          builder.addTextStyle(0, 1, 0);

          // break
          builder.addText('\n');

          builder.addTextAlign(builder.ALIGN_CENTER)
          builder.addText('Potongan Harga Total')
          builder.addTextPosition(250, 0)
          builder.addText('0')
          builder.addTextStyle(0, 1, 0);
          // break
          builder.addText('\n');

          builder.addTextAlign(builder.ALIGN_RIGHT)
          builder.addText('Grand Total')
          builder.addTextPosition(250, 0)
          builder.addText('275000')
          builder.addTextStyle(0, 1, 0);

          builder.addText('\n');
          builder.addText('\n')

          builder.addText('Total Bayar')
          builder.addTextPosition(250, 0)
          builder.addText('300000')
          builder.addTextStyle(0, 1, 0);

          builder.addText('\n');

          builder.addText('Total Kembalian')
          builder.addTextPosition(250, 0)
          builder.addText('25000')
          builder.addTextStyle(0, 1, 0);

          builder.addText('\n');
          builder.addText('\n')

          builder.addText('Tipe Pembayaran')
          builder.addTextPosition(250, 0)
          builder.addText('Kartu Debit')
          builder.addTextStyle(0, 1, 0);

          builder.addText('\n');

          builder.addText('Nomor Kartu')
          builder.addTextPosition(250, 0)
          builder.addText('01234678912312')
          builder.addTextStyle(0, 1, 0);

          builder.addText('\n');

          builder.addTextFont(builder.FONT_SPECIAL_B);
          builder.addText('Barang yang sudah dibeli tidak dapat di kembalikan ataupun ditukarkan.\n')


          builder.addText('\n')
          builder.addText('\n')
          builder.addText('Powered By Uniform.id')

          // end page mode
          builder.addPageEnd();
          // builder.addPageLine(100, 100, 0, 0, builder.LINE_THIN)
          // builder.addFeedLine(30) //ini panjang struk
          builder.addCut(builder.CUT_FEED); //Acquire the print document
          let request = builder.toString();
          let address = 'http://192.168.192.168/cgi-bin/epos/service.cgi?devid=local_printer&timeout=10000'

          let epos = new epson.ePOSPrint(address)
          console.log(epos)
          epos.send(request)
        }
    </script>
  </body>
</html>
